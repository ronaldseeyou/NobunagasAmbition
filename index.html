<!DOCTYPE html>
<html lang="zh-HK">
<head>
  <meta charset="UTF-8" />
  <title>ä¿¡é•·ä¹‹é‡æœ› æˆ°ç¸¾çµ±è¨ˆ v15</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      /* Dark Mode Theme */
      --bg: #000000; --card: #121212; --header-bg: #0a0a0a;
      --border: #27272a; --accent: #38bdf8; --text: #e5e7eb;
      --muted: #a1a1aa; --win: #4ade80; --lose: #ef4444;
      --money: #fbbf24; --oda: #dc2626; --united: #2563eb;
    }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      background: var(--bg);
      color: var(--text); min-height: 100vh; padding-bottom: 60px;
    }
    
    /* Header ç½®ä¸­ + Icon åŠ å¤§ */
    header { position: sticky; top: 0; z-index: 10; padding: 16px 12px; border-bottom: 1px solid var(--border); background: rgba(10,10,10,0.95); backdrop-filter: blur(10px); text-align: center; }
    .header-content { display: flex; flex-direction: column; align-items: center; gap: 8px; }
    .header-icon { width: 50px; height: 50px; border-radius: 8px; object-fit: cover; border: 2px solid var(--accent); }
    h1 { font-size: 18px; font-weight: 700; color: var(--accent); margin: 0; }
    h2 { font-size: 12px; color: var(--muted); font-weight: 400; margin: 0; }

    .container { max-width: 900px; margin: 0 auto; padding: 12px; }
    
    .tabs { display: flex; justify-content: center; gap: 8px; margin: 12px 0; border-bottom: 2px solid var(--border); }
    .tab { padding: 10px 20px; background: transparent; color: var(--muted); border: none; cursor: pointer; font-size: 14px; font-weight: 500; border-bottom: 2px solid transparent; transition: all 0.2s; }
    .tab:hover { color: var(--text); }
    .tab.active { color: var(--accent); border-bottom-color: var(--accent); }
    
    .tab-content { display: none; }
    .tab-content.active { display: block; }
    
    .section-header { display: flex; justify-content: space-between; align-items: center; margin: 20px 0 10px; }
    .section-title { font-size: 15px; font-weight: 600; color: #fff; display: flex; align-items: center; gap: 6px; }
    
    /* é™£ç‡Ÿå‹ç‡ (å‹•æ…‹é¡è‰²) */
    .faction-stats { background: var(--card); border-radius: 10px; border: 1px solid var(--border); padding: 16px; margin-bottom: 18px; }
    .faction-header { font-size: 12px; color: var(--muted); margin-bottom: 10px; text-align: center; }
    .faction-bar-container { display: flex; height: 40px; border-radius: 6px; overflow: hidden; box-shadow: 0 4px 6px rgba(0,0,0,0.3); }
    .faction-bar { display: flex; align-items: center; justify-content: center; font-weight: 700; font-size: 14px; transition: all 0.3s; position: relative; color: #fff; }
    /* é¡è‰²æœƒç”± JS å‹•æ…‹æ§åˆ¶ */
    .faction-bar span { z-index: 1; text-shadow: 0 1px 3px rgba(0,0,0,0.8); }
    
    .table-card { background: var(--card); border-radius: 10px; border: 1px solid var(--border); overflow: hidden; box-shadow: 0 3px 5px -1px rgba(0, 0, 0, 0.1); margin-bottom: 16px; }
    table { width: 100%; border-collapse: collapse; font-size: 12px; text-align: left; }
    th { background: #18181b; color: var(--muted); font-weight: 500; padding: 10px 12px; font-size: 11px; text-transform: uppercase; letter-spacing: 0.5px; }
    td { padding: 12px; border-bottom: 1px solid var(--border); }
    tr:last-child td { border-bottom: none; }
    tr:hover { background: rgba(255, 255, 255, 0.03); }
    
    .player-name { font-weight: 600; color: #fff; display: block; font-size: 13px; }
    .team-name { font-weight: 600; color: #fff; font-size: 12px; line-height: 1.4; }
    .top3-heroes { font-size: 11px; color: var(--muted); margin-top: 3px; line-height: 1.3; }
    
    .win-rate { font-weight: 700; }
    .win-rate.high { color: var(--win); }
    .win-rate.mid { color: var(--money); }
    .win-rate.low { color: var(--lose); }
    
    .money { font-family: monospace; font-weight: 600; }
    .money.plus { color: var(--win); }
    .money.minus { color: var(--lose); }

    /* Sorting Control */
    .sort-controls { display: flex; gap: 8px; }
    .sort-btn { background: #27272a; color: #a1a1aa; border: 1px solid #3f3f46; padding: 4px 10px; border-radius: 4px; font-size: 11px; cursor: pointer; transition: all 0.2s; }
    .sort-btn.active { background: var(--accent); color: #000; border-color: var(--accent); font-weight: 600; }

    .hero-stats-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(260px, 1fr)); gap: 12px; }
    .hero-stats-card { background: var(--card); border: 1px solid var(--border); border-radius: 8px; padding: 12px; }
    .hero-stats-header { font-size: 14px; font-weight: 600; color: #fff; margin-bottom: 10px; padding-bottom: 6px; border-bottom: 1px solid var(--border); }
    .hero-item { display: flex; justify-content: space-between; align-items: center; padding: 6px 0; font-size: 12px; }
    .hero-item:not(:last-child) { border-bottom: 1px solid #1e293b; }
    .hero-name { color: var(--text); font-weight: 500; }
    .hero-stats { color: var(--muted); font-size: 11px; }
    .hero-rate { margin-left: 10px; font-weight: 600; }
    .hero-rate.high { color: var(--win); }
    .hero-rate.mid { color: var(--money); }
    .hero-rate.low { color: var(--lose); }

    .date-group { background: var(--card); border: 1px solid var(--border); border-radius: 10px; padding: 12px; margin-bottom: 16px; }
    .date-header { font-size: 16px; font-weight: 700; color: var(--accent); margin-bottom: 12px; padding-bottom: 8px; border-bottom: 2px solid var(--border); }
    
    .match-card { background: #0a0a0a; border: 1px solid var(--border); border-radius: 8px; margin-bottom: 10px; padding: 12px; }
    .match-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; font-size: 12px; padding-bottom: 6px; border-bottom: 1px solid #27272a; }
    .match-number { color: var(--muted); font-weight: 600; }
    .match-bet { color: var(--money); font-weight: 600; }
    
    .match-teams { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; }
    .team { padding: 10px; border-radius: 6px; position: relative; }
    .team.oda { border: 1px solid rgba(220, 38, 38, 0.4); }
    .team.united { border: 1px solid rgba(37, 99, 235, 0.4); }
    
    .team.oda.winner,
    .team.united.winner { background: rgba(74, 222, 128, 0.1); border-color: rgba(74, 222, 128, 0.5); }
    .team.oda.loser,
    .team.united.loser { background: rgba(239, 68, 68, 0.1); border-color: rgba(239, 68, 68, 0.5); }
    
    .team-header { font-size: 14px; margin-bottom: 8px; text-transform: uppercase; letter-spacing: 1px; font-weight: 800; display: flex; align-items: center; gap: 6px; color: #fff; text-shadow: 0 1px 2px #000; }
    .team.winner .team-header::before { content: "âœ…"; }
    .team.loser .team-header::before { content: "âŒ"; opacity: 0.7; }
    
    .match-player { font-size: 12px; margin-bottom: 4px; line-height: 1.4; padding: 3px 0; }
    .match-player strong { color: var(--text); font-weight: 600; }
    .match-player span { opacity: 0.7; font-size: 11px; margin-left: 5px; }

    footer { text-align: center; font-size: 11px; color: var(--muted); margin-top: 30px; opacity: 0.5; }
  </style>
</head>
<body>

<header>
  <div class="container">
    <div class="header-content">
      <img src="https://raw.githubusercontent.com/ronaldseeyou/NobunagasAmbition/main/images/p4JFAns.jpg" alt="Logo" class="header-icon">
      <div class="header-text">
        <h1>âš”ï¸ ä¿¡é•·ä¹‹é‡æœ› æˆ°ç¸¾ç¶²</h1>
        <h2>å³æ™‚çµ±è¨ˆ / é™£ç‡Ÿå°æŠ— / è‹±é›„æ•¸æ“š</h2>
      </div>
    </div>
  </div>
</header>

<div class="container">
  <div class="tabs">
    <button class="tab active" onclick="switchTab('players')">ğŸ‘¥ ç©å®¶</button>
    <button class="tab" onclick="switchTab('matches')">ğŸ“… æ¯æ—¥å°æˆ°</button>
  </div>

  <div id="players-tab" class="tab-content active">
    <!-- é™£ç‡Ÿå‹ç‡ -->
    <div class="section-title">âš”ï¸ é™£ç‡Ÿå‹ç‡</div>
    <div class="faction-stats">
      <div class="faction-header">ç¸½å…± <span id="total-matches">0</span> å ´å°æˆ°</div>
      <div class="faction-bar-container">
        <div class="faction-bar" id="oda-bar">
          <span id="oda-text">ç¹”ç”°è» 0%</span>
        </div>
        <div class="faction-bar" id="united-bar">
          <span id="united-text">è¯åˆè» 0%</span>
        </div>
      </div>
    </div>

    <div class="section-title">ğŸ† ç©å®¶ç¸½è¦½</div>
    <div class="table-card">
      <table>
        <thead>
          <tr>
            <th>ç©å®¶</th>
            <th>å ´æ•¸ (W/L)</th>
            <th>å‹ç‡</th>
            <th>è‹±é›„æ± </th>
            <th>æœ€å¸¸ç”¨Top3è‹±é›„</th>
            <th>ç¸½é‡‘é¡</th>
          </tr>
        </thead>
        <tbody id="player-overview-body"></tbody>
      </table>
    </div>

    <div class="section-title">ğŸ¤ çµ„éšŠå‹ç‡ (3äººçµ„)</div>
    <div class="table-card">
      <table>
        <thead>
          <tr>
            <th>éšŠä¼çµ„åˆ</th>
            <th>ç¸½å ´æ¬¡</th>
            <th>æˆ°ç¸¾ (W/L)</th>
            <th>å‹ç‡</th>
          </tr>
        </thead>
        <tbody id="team-stats-body"></tbody>
      </table>
    </div>

    <!-- ç©å®¶è‹±é›„å‹ç‡ (æ–°å¢ Sorting) -->
    <div class="section-header">
      <div class="section-title">ğŸ¯ ç©å®¶è‹±é›„å‹ç‡</div>
      <div class="sort-controls">
        <button class="sort-btn active" onclick="sortHeroes('count')">æŒ‰æ¬¡æ•¸</button>
        <button class="sort-btn" onclick="sortHeroes('rate')">æŒ‰å‹ç‡</button>
      </div>
    </div>
    <div class="hero-stats-grid" id="hero-stats-container"></div>
  </div>

  <div id="matches-tab" class="tab-content">
    <div class="section-title">ğŸ“… å°æˆ°æ­·å²</div>
    <div id="matches-list"></div>
  </div>

  <footer>
    Last Updated: <span id="last-update"></span>
  </footer>
</div>

<script>
  const matches = [
    {
      date: "2æœˆ1æ—¥ ç¬¬1å ´", bet: 150, winner: "oda",
      oda: [
        { name: "Water", hero: "å±±ç‹" },
        { name: "æœæ¼”", hero: "åˆ©å®¶" },
        { name: "Woman", hero: "æ£®ä»”" },
        { name: "ä¿Š", hero: "ä¿¡é•·" }
      ],
      united: [
        { name: "å“²", hero: "è‚¥å·" },
        { name: "å‚‘", hero: "æ¾å§¬" },
        { name: "å­èª ", hero: "ä¸‰å¥½" }
      ]
    },
    {
      date: "2æœˆ1æ—¥ ç¬¬2å ´", bet: 150, winner: "united",
      oda: [
        { name: "Woman", hero: "æ£®ä»”" },
        { name: "å‚‘", hero: "JJä½¬" },
        { name: "å­èª ", hero: "ç¨»å§¬" }
      ],
      united: [
        { name: "å“²", hero: "æœå¿ƒ" },
        { name: "ä¿Š", hero: "æ…¶æ¬¡" },
        { name: "æœæ¼”", hero: "æ‘ä¸Š" }
      ]
    },
    {
      date: "2æœˆ1æ—¥ ç¬¬3å ´", bet: 150, winner: "oda",
      oda: [
        { name: "å“²", hero: "æœå¿ƒ" },
        { name: "æœæ¼”", hero: "æ£®ä»”" },
        { name: "ä¿Š", hero: "ä¿¡é•·" }
      ],
      united: [
        { name: "å‚‘", hero: "ç™¾åœ°" },
        { name: "Woman", hero: "è‚¥å·" },
        { name: "å­èª ", hero: "ç‰›ç‰›" }
      ]
    },
    {
      date: "2æœˆ7æ—¥ ç¬¬1å ´", bet: 150, winner: "united",
      oda: [
        { name: "å­èª ", hero: "ç¾©é¾" },
        { name: "æœæ¼”", hero: "å·éŒ¢ä½¬" },
        { name: "å‚‘", hero: "JJä½¬" }
      ],
      united: [
        { name: "Water", hero: "ç›´æ±Ÿ" },
        { name: "å“²", hero: "ä¸‰å¥½" },
        { name: "Woman", hero: "é¦¬å ´" }
      ]
    },
    {
      date: "2æœˆ7æ—¥ ç¬¬2å ´", bet: 150, winner: "oda",
      oda: [
        { name: "Water", hero: "ä¿¡é•·" },
        { name: "å“²", hero: "ç¾©é¾" },
        { name: "Woman", hero: "æ£®ä»”" }
      ],
      united: [
        { name: "å­èª ", hero: "æœå¿ƒ" },
        { name: "æœæ¼”", hero: "è‚¥å·" },
        { name: "å‚‘", hero: "ç™¾åœ°" }
      ]
    },
    {
      date: "2æœˆ8æ—¥ ç¬¬1å ´", bet: 200, winner: "oda",
      oda: [
        { name: "å­èª ", hero: "ç€§å·" },
        { name: "æœæ¼”", hero: "æ£®ä»”" },
        { name: "å‚‘", hero: "é…’äº•" }
      ],
      united: [
        { name: "å“²", hero: "ç›´æ±Ÿ" },
        { name: "Woman", hero: "è‚¥å·" },
        { name: "ä¿Š", hero: "ç¾©é¾" }
      ]
    },
    {
      date: "2æœˆ8æ—¥ ç¬¬2å ´", bet: 200, winner: "oda",
      oda: [
        { name: "å“²", hero: "ä½ä½" },
        { name: "Woman", hero: "é…’äº•" },
        { name: "ä¿Š", hero: "ç¾½æŸ´" }
      ],
      united: [
        { name: "å­èª ", hero: "é¢¨é­”" },
        { name: "æœæ¼”", hero: "ç‰›ç‰›" },
        { name: "å‚‘", hero: "é“é›ª" }
      ]
    },
    {
      date: "2æœˆ8æ—¥ ç¬¬3å ´", bet: 200, winner: "oda",
      oda: [
        { name: "å­èª ", hero: "æ¿ƒå§¬" },
        { name: "æœæ¼”", hero: "åˆ©å®¶" },
        { name: "å‚‘", hero: "å–®ç¾½" }
      ],
      united: [
        { name: "å“²", hero: "å‹è³´" },
        { name: "Woman", hero: "é¦¬å ´" },
        { name: "ä¿Š", hero: "å…‰ç§€" }
      ]
    }
  ];

  let currentHeroSort = 'count'; // 'count' or 'rate'
  let cachedSortedPlayers = [];
  let cachedHeroStats = {};

  function renderSite() {
    const stats = {};
    const heroStats = {};
    const teamStats = {};

    const odaWins = matches.filter(m => m.winner === "oda").length;
    const unitedWins = matches.filter(m => m.winner === "united").length;
    const total = matches.length;
    const odaPercent = Math.round((odaWins / total) * 100);
    const unitedPercent = Math.round((unitedWins / total) * 100);

    document.getElementById('total-matches').innerText = total;
    
    // Dynamic Faction Colors
    const odaBar = document.getElementById('oda-bar');
    const unitedBar = document.getElementById('united-bar');
    
    odaBar.style.width = odaPercent + '%';
    unitedBar.style.width = unitedPercent + '%';
    document.getElementById('oda-text').innerText = `ç¹”ç”°è» ${odaPercent}%`;
    document.getElementById('united-text').innerText = `è¯åˆè» ${unitedPercent}%`;

    // High Win Rate = Green, Low = Red
    if (odaPercent >= 50) {
      odaBar.style.background = "var(--win)";
      unitedBar.style.background = "var(--lose)";
    } else {
      odaBar.style.background = "var(--lose)";
      unitedBar.style.background = "var(--win)";
    }

    matches.forEach(match => {
      const bet = match.bet;
      const isOdaWin = match.winner === "oda";
      const winningTeam = isOdaWin ? match.oda : match.united;
      const losingTeam = isOdaWin ? match.united : match.oda;

      const totalPot = losingTeam.length * bet;
      const winAmount = totalPot / winningTeam.length;
      const loseAmount = bet;

      [
        { team: match.oda, won: isOdaWin },
        { team: match.united, won: !isOdaWin }
      ].forEach(({ team, won }) => {
        if (team.length === 3) {
          const names = team.map(p => p.name).sort();
          const teamKey = names.join(" & ");
          if (!teamStats[teamKey]) teamStats[teamKey] = { wins: 0, losses: 0, total: 0 };
          teamStats[teamKey].total++;
          if (won) teamStats[teamKey].wins++;
          else teamStats[teamKey].losses++;
        }
      });

      winningTeam.forEach(p => {
        if (!stats[p.name]) stats[p.name] = { wins: 0, losses: 0, money: 0, heroes: [] };
        stats[p.name].wins++;
        stats[p.name].money += winAmount;
        stats[p.name].heroes.push(p.hero);

        if (!heroStats[p.name]) heroStats[p.name] = {};
        if (!heroStats[p.name][p.hero]) heroStats[p.name][p.hero] = { wins: 0, losses: 0 };
        heroStats[p.name][p.hero].wins++;
      });

      losingTeam.forEach(p => {
        if (!stats[p.name]) stats[p.name] = { wins: 0, losses: 0, money: 0, heroes: [] };
        stats[p.name].losses++;
        stats[p.name].money -= loseAmount;
        stats[p.name].heroes.push(p.hero);

        if (!heroStats[p.name]) heroStats[p.name] = {};
        if (!heroStats[p.name][p.hero]) heroStats[p.name][p.hero] = { wins: 0, losses: 0 };
        heroStats[p.name][p.hero].losses++;
      });
    });

    // Sort Players: Rate -> Pool -> Money -> Total
    cachedSortedPlayers = Object.keys(stats).map(name => {
      const p = stats[name];
      const total = p.wins + p.losses;
      const rate = total > 0 ? Math.round((p.wins / total) * 100) : 0;
      const uniqueHeroes = [...new Set(p.heroes)];
      const heroPool = uniqueHeroes.length;
      
      const heroCounts = {};
      p.heroes.forEach(h => { heroCounts[h] = (heroCounts[h] || 0) + 1; });
      const top3 = Object.entries(heroCounts)
        .sort((a, b) => b[1] - a[1])
        .slice(0, 3)
        .map(([hero, count]) => `${hero}(${count})`)
        .join(", ");
      
      return { name, ...p, total, rate, heroPool, top3 };
    }).sort((a, b) => b.rate - a.rate || b.heroPool - a.heroPool || b.money - a.money || b.total - a.total);

    cachedHeroStats = heroStats;

    // Render Player Table
    const tbody = document.getElementById('player-overview-body');
    tbody.innerHTML = cachedSortedPlayers.map(p => {
      const moneyClass = p.money >= 0 ? 'plus' : 'minus';
      const moneySign = p.money >= 0 ? '+' : '';
      const rateClass = p.rate >= 60 ? 'high' : (p.rate >= 40 ? 'mid' : 'low');
      const displayMoney = Number.isInteger(p.money) ? p.money : p.money.toFixed(1);

      return `<tr>
        <td><span class="player-name">${p.name}</span></td>
        <td>${p.total} <span style="opacity:0.5; font-size:10px">(${p.wins}W/${p.losses}L)</span></td>
        <td class="win-rate ${rateClass}">${p.rate}%</td>
        <td>${p.heroPool}</td>
        <td><div class="top3-heroes">${p.top3}</div></td>
        <td class="money ${moneyClass}">${moneySign}$${displayMoney}</td>
      </tr>`;
    }).join('');

    // Render Team Stats
    const sortedTeams = Object.keys(teamStats).map(teamKey => {
      const t = teamStats[teamKey];
      const rate = t.total > 0 ? Math.round((t.wins / t.total) * 100) : 0;
      return { teamKey, ...t, rate };
    }).sort((a, b) => b.rate - a.rate || b.total - a.total);

    const teamTbody = document.getElementById('team-stats-body');
    teamTbody.innerHTML = sortedTeams.map(t => {
      const rateClass = t.rate >= 60 ? 'high' : (t.rate >= 40 ? 'mid' : 'low');
      return `<tr>
        <td><span class="team-name">${t.teamKey}</span></td>
        <td>${t.total}</td>
        <td>${t.wins}W / ${t.losses}L</td>
        <td class="win-rate ${rateClass}">${t.rate}%</td>
      </tr>`;
    }).join('');

    renderHeroes();

    // Render Matches
    const matchesByDate = {};
    matches.forEach(m => {
      const date = m.date.split(' ')[0];
      if (!matchesByDate[date]) matchesByDate[date] = [];
      matchesByDate[date].push(m);
    });

    const matchesList = document.getElementById('matches-list');
    matchesList.innerHTML = Object.entries(matchesByDate).map(([date, dateMatches]) => {
      let inner = `<div class="date-group">
        <div class="date-header">${date}</div>`;
      
      dateMatches.forEach(m => {
        const matchNum = m.date.split(' ')[1];
        const odaClass = m.winner === "oda" ? "winner" : "loser";
        const unitedClass = m.winner === "united" ? "winner" : "loser";
        const odaPlayers = m.oda.map(p => `<div class="match-player"><strong>${p.name}</strong><span>${p.hero}</span></div>`).join('');
        const unitedPlayers = m.united.map(p => `<div class="match-player"><strong>${p.name}</strong><span>${p.hero}</span></div>`).join('');
        
        inner += `<div class="match-card">
          <div class="match-header">
            <span class="match-number">${matchNum}</span>
            <span class="match-bet">è³­æ³¨ $${m.bet}</span>
          </div>
          <div class="match-teams">
            <div class="team oda ${odaClass}">
              <div class="team-header">ç¹”ç”°è»</div>
              ${odaPlayers}
            </div>
            <div class="team united ${unitedClass}">
              <div class="team-header">è¯åˆè»</div>
              ${unitedPlayers}
            </div>
          </div>
        </div>`;
      });
      inner += `</div>`;
      return inner;
    }).join('');

    document.getElementById('last-update').innerText = new Date().toLocaleString('zh-HK');
  }

  // New function for sorting heroes
  function sortHeroes(type) {
    currentHeroSort = type;
    document.querySelectorAll('.sort-btn').forEach(btn => btn.classList.remove('active'));
    event.target.classList.add('active');
    renderHeroes();
  }

  function renderHeroes() {
    const heroContainer = document.getElementById('hero-stats-container');
    heroContainer.innerHTML = cachedSortedPlayers.map(player => {
      const playerHeroes = cachedHeroStats[player.name];
      if (!playerHeroes) return '';
      
      const heroList = Object.entries(playerHeroes)
        .map(([hero, stats]) => {
          const total = stats.wins + stats.losses;
          const rate = total > 0 ? Math.round((stats.wins / total) * 100) : 0;
          return { hero, ...stats, total, rate };
        })
        .sort((a, b) => {
          if (currentHeroSort === 'count') {
            return b.total - a.total || b.rate - a.rate;
          } else {
            return b.rate - a.rate || b.total - a.total;
          }
        });
      
      const heroItems = heroList.map(h => {
        const rateClass = h.rate >= 60 ? 'high' : (h.rate >= 40 ? 'mid' : 'low');
        return `<div class="hero-item">
          <span class="hero-name">${h.hero}</span>
          <div>
            <span class="hero-stats">${h.total}æ¬¡ (${h.wins}W-${h.losses}L)</span>
            <span class="hero-rate ${rateClass}">${h.rate}%</span>
          </div>
        </div>`;
      }).join('');
      
      return `<div class="hero-stats-card">
        <div class="hero-stats-header">${player.name}</div>
        ${heroItems}
      </div>`;
    }).join('');
  }

  function switchTab(tab) {
    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
    document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
    if (tab === 'players') {
      document.querySelector('.tab:nth-child(1)').classList.add('active');
      document.getElementById('players-tab').classList.add('active');
    } else {
      document.querySelector('.tab:nth-child(2)').classList.add('active');
      document.getElementById('matches-tab').classList.add('active');
    }
  }

  renderSite();
</script>

</body>
</html>
